<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<style>
    .container-fluid{
        justify-items: center;
    }
    .nav-item a {
        text-decoration: none;
        color: whitesmoke;
    }
    .container-fluid .btn{
        background-color: maroon;
        border:none;
        
    }
    .container-fluid .btn:hover{
        background-color: rgb(51, 2, 2);
        border:none;
    }
    .container-fluid .btn:active{
        background-color: maroon;
        border:none;  
    }
</style>
</head>
<body>
    <div class="container"></div>
        <ul class="nav" style="background-color: maroon">
            <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Active</a>
            </li>
            <li class="nav-item" >
            <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
            </li>

        </ul>
        <p>pdf_created value: {{ pdf_created }}</p>
        <p>questions: {{ question_num }}</p>

        <div class="container-fluid">
            <div class="col-lg-4 shadow-lg mt-5 p-4">
            
                
                <form method="POST" action="{% url 'create_pdf' %}">
                    {% csrf_token %}
                    <div class="mb-3 col-5">
                        <label for="formGroupExampleInput" class="form-label">File Name</label>
                        <input type="text" name="file_name" class="form-control" id="formGroupExampleInput" placeholder="">
                    </div>
                    <div class="mb-3 col-6">
                        <label for="formGroupExampleInput2" class="form-label">Number of Questions</label>
                        <input type="number" name="q_no" class="form-control" id="formGroupExampleInput2" min="1" placeholder="1">
                    </div>
                    <button class="btn btn-primary" type="submit" >Create PDF</button>
                </form>
                 

                <script>
                    document.querySelector('form').addEventListener('submit', function (event) {
                        event.preventDefault();

                        // Send the form data
                        const formData = new FormData(this);

                        fetch(this.action, {
                            method: 'POST',
                            body: formData,
                        })
                        .then((response) => {
                            if (response.ok) {
                                // Trigger the file download
                                return response.blob().then((blob) => {
                                    const url = window.URL.createObjectURL(blob);
                                    const link = document.createElement('a');
                                    link.href = url;
                                    link.download = response.headers.get('Content-Disposition').split('filename=')[1];
                                    link.click();

                                    // Redirect after download
                                    const redirectUrl = response.headers.get('Redirect-After-Download');
                                    if (redirectUrl) {
                                        window.location.href = redirectUrl;
                                    }
                                });
                            } else {
                                alert('Error generating PDF.');
                            }
                        });
                    });
                </script>

                <!--
             
                <input type="hidden" name="que_no" value="{{ que_no }}">
                <p>The else has worked</p>
                
                    <form method="POST" action="{%url 'store_ans' %}">
                        {% csrf_token %}
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="question_{{ q }}" id="inlineRadio1" value="option1">
                            <label class="form-check-label" for="inlineRadio1">A</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="question_{{ q }}" id="inlineRadio1" value="option1">
                            <label class="form-check-label" for="inlineRadio1">B</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="question_{{ q }}" id="inlineRadio1" value="option1">
                            <label class="form-check-label" for="inlineRadio1">C</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="question_{{ q }}" id="inlineRadio1" value="option1">
                            <label class="form-check-label" for="inlineRadio1">D</label>
                        </div>
                    </form>
                
                    
                    
             
                -->
                
            </div>
        </div>
   </div>
    </body>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>